<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Team Srijan Club - Formula Student Team India">
    <meta name="keywords" content="Team Srijan Club, Formula Student, Formula Bharat, Birla Institute of Technology - Mesra, BIT Mesra, Crews, Team Members">
    <title>Our Crews - Team Srijan | Formula Student Club</title>
    <link rel="shortcut icon" href="/assets/images/branding/favicon.ico" type="image/x-icon">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.3/css/bootstrap.min.css" integrity="sha512-jnSuA4Ss2PkkikSOLtYs8BlYIeeIK1h99ty4YfvRPAlzr377vr3CXDb7sb7eEEBYjDtcYj+AjBH3FLv5uSJuXg==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Inter:ital,opsz,wght@1,14..32,500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/assets/owl.carousel.min.css" integrity="sha512-tS3S5qG0BlhnQROyJXvNjeEM4UpMXHrQfTGmbQ1gKmelCxlSEBUaxhRBj/EFTzpbP4RVSrpEikbmdJobCvhE3g==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/assets/owl.theme.green.min.css" integrity="sha512-C8Movfk6DU/H5PzarG0+Dv9MA9IZzvmQpO/3cIlGIflmtY3vIud07myMu4M/NTPJl8jmZtt/4mC9bAioMZBBdA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="/assets/css/style.min.css">
</head>
<body class="d-flex flex-column min-vh-100">
    <header id="page-header"></header>
    <main class="flex-grow-1 py-3">
        <article class="container-xxl">
            <h1 class="text-center">OUR CREWS</h1>
            <hr>
            <nav class="row justify-content-center">
                <div class="col-lg-3 col-md-4 col-sm-6">
                    <div class="input-group">
                        <div class="form-floating">
                            <select id="batches" class="form-select">
                            </select>
                            <label for="batches">Batch</label>
                        </div>
                        <div class="form-floating">
                            <select id="teams" class="form-select">
                            </select>
                            <label for="teams">Team</label>
                        </div>
                    </div>
                </div>
            </nav>
            <hr>
            <section id="members" class="row g-4">
            </section>
            <hr>
        </article>
    </main>
    <aside id="bottom-menu"></aside>
    <footer id="page-footer"></footer>
</body>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.3/js/bootstrap.bundle.min.js" integrity="sha512-7Pi/otdlbbCR+LnW+F7PwFcSDJOuUJB3OxtEHbg4vSMvzvJjde4Po1v4BR9Gdc9aXNUNFVUY+SK51wWT8WF0Gg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script src="/assets/js/script.min.js"></script>
<script>
    $(document).ready(function () {
        const filename = "/assets/json/members.json";
        const $batches = $("#batches");
        const $teams = $("#teams");
        const $members = $("#members");

        function error_print(msg){
            $members.html(`<div class="col-12"><p class="text-center">${msg}</p></div>`);
        }

        $.get(filename, function (data) {
            
            function load_options($element, key) {
                const options = data[key];
                if (!options) return;
                for (let i in options) {
                    const option = new Option(options[i],i);
                    $element.append(option);
                }
            }

            load_options($batches, "batches");
            load_options($teams, "teams");

            function card(member){

                const image = `/assets/images/crews/${member.image}`;

                let teams = `<p class="card-text d-flex flex-wrap">`;
                for(const key of member.team){
                    const team = data.teams[key];
                    teams += `<small class="badge rounded-pill text-bg-danger m-1">${team}</small>`;
                }
                teams += `</p>`;

                let contacts = "";
                for (key in member.contacts){
                    const contact = data.contact_methods[key];
                    contacts += `<a href="${contact.url+member.contacts[key]}" class="nav-item" target="_blank"><i class="${contact.icon} fa-xl"></i></a>`;
                }

                return `<div class="col-lg-3 col-md-4 col-sm-6">
                    <div class="card h-100">
                        <div class="ratio ratio-1x1"><img src="${image}" alt="${member.name}" class="card-img-top"></div>
                        <div class="card-body d-flex flex-column">
                            <h4 class="card-title">${member.name}</h4>
                            ${teams}
                            <nav class="mt-auto nav nav-justified">${contacts}</nav>
                        </div>
                    </div>
                </div>`
            }

            function load_members() {
                const batch = $batches.val();
                const team = $teams.val();

                $members.empty();
                let member_found = false;
                for (const member of data.members) {
                    if (member.batch == batch && member.team.includes(team)) {
                        $members.append(card(member))
                        member_found = true;
                    }
                }
                if (!member_found) {
                    error_print("No members found.");
                }
            }

            load_members();

            $batches.add($teams).on("change", function(){
                load_members();
            });

        }).fail(function (jqxhr, textStatus, error) {
            console.error("Failed to load", filename, "=>", textStatus, error);
            error_print("Failed to load members.");
        });
    });

</script>
</html>